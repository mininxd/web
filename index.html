<html>
  <head>
<title>Brat Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#222" />
<link rel="stylesheet" href="./style.css">
<script type="module" src="./script.js"></script>
<link rel="icon" type="image/x-icon" href="/assets/Program.ico">
</head>
  
<body id="bodyEl">
  <div id="windowEl" class="window">
    <div class="title-bar">
      <div class="title-bar-text">
        <img style="width:12px; margin-right:8px" src="/assets/Program.ico"> Brat Generator</div>
    <div class="title-bar-controls">
      <button aria-label="Minimize"></button>
      <button id="maximize" aria-label="Maximize"></button>
      <button aria-label="Close"></button>
    </div>
  </div>
  
<div class="window-body">
  <fieldset>
    <legend>Settings</legend>
      <div class="flex">
        <input id="inputText" placeholder="Input text">
        <button id="generateBtn">generate</button>
      </div>

  <fieldset>
    <legend>Result</legend>
      <center>
        <div id="imgWrapper">
          <div id="canvas">
            <img src="./assets/Blank_sheet.ico" id="bratImg">
          </div>
        </div>
      </center>
  </fieldset>
</fieldset>

<div style="display:none" id="msgBar" class="status-bar">
  <p class="status-bar-field">
      <span id="msg"></span>
    </p>
</div>
<br>

  <div class="flex-end">
        <button style="display:none" id="downBtn">Download</button>
      <a target="_blank" href="https://github.com/mininxd/web/tree/brat">
        <button>Source Code</button>
      </a>
      <a target="_blank" href="https://saweria.co/mininxd">
        <button>Donate</button>
      </a>
  </div>
</div>

</div>

<div id="footer">
<center>
 <p>&copy; 2024 - Present. </p>
</center>
</div>


<script src="https://unpkg.com/html-to-image@1.11.11/dist/html-to-image.js"></script>
<script src="https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js"></script>

<script type="module">
downBtn.addEventListener('click', () => {
  let filename = localStorage.getItem("filename").split("/").pop();
 
try { 
 htmlToImage.toPng(document.getElementById('canvas')).then(function (blob) {
     FileSaver.saveAs(blob, filename);
  }).catch(e => {
    window.open(bratImg.src, "_blank");
  })
    } catch(e) {
    alert(e)
  }
})
</script>
</body>
</html>
